# HAP 前后端项目搭建 Skill

## 简介

这是一个专业的技能，用于使用明道云 HAP（高级应用平台）作为数据库搭建独立网站。提供完整的 HAP + 前端项目搭建指导。

## 适用场景

- ✅ 企业官网（产品展示、新闻资讯、案例展示）
- ✅ 内容管理网站（博客、文档库、知识库）
- ✅ 数据展示平台（数据看板、报表展示）
- ✅ 表单收集系统（在线预约、问卷调查、询价订单）
- ✅ 营销落地页（活动页面、促销页面）

## 核心能力

1. **HAP 后台配置**
   - 数据结构设计与创建
   - 示例数据填充（附件字段必须填充图片 URL）
   - API 凭证获取

2. **前端项目搭建**
   - 项目结构设计
   - HTML/CSS/JS 代码编写
   - 响应式设计

3. **API 集成**
   - HAP API V3 封装
   - 数据获取与渲染
   - 错误处理

4. **开发工作流**
   - 自动启动本地开发服务器
   - 完整的开发流程指导

## 使用方法

当用户提到以下关键词时，会自动触发此技能：

- "搭建网站"
- "企业官网"
- "HAP 作为数据库"
- "前后端分离"
- "内容管理系统"
- "使用 HAP 搭建前端项目"

## 工作流程

1. **需求理解与结构评估** - 读取 HAP 应用结构，评估是否满足需求
2. **用户确认** - 获得用户明确同意后再执行结构变更
3. **HAP 后台配置** - 创建/补充数据结构和示例数据
4. **获取 API 凭证** - 从 MCP 配置或 HAP 后台获取认证信息
5. **前端项目搭建** - 创建完整的项目结构和代码
6. **API 集成** - 实现前端与 HAP API V3 的数据交互
7. **数据渲染** - 实现动态数据渲染和用户交互
8. **启动开发服务器** - 自动启动本地服务器供预览

## 核心原则

### 1. 数据来源原则（必须动态）
- ✅ 业务数据必须从 HAP API 获取
- ❌ 禁止在代码中写死业务数据

### 2. 只增不删原则（红线）
- ✅ 可以新增工作表、字段、数据（需确认）
- ❌ 严禁删除现有结构或数据

### 3. 用户确认机制（强制）
- 🔴 任何结构变更必须征得用户明确同意
- 🔴 使用 `AskUserQuestion` 工具进行确认

### 4. 示例数据要求
- ✅ 每个新增工作表至少 5 条示例数据
- 🔴 附件字段必须填充图片 URL
- ⚠️ SingleSelect/MultipleSelect 筛选必须使用 key（UUID）

## 文件结构

```
hap-frontend-project/
├── SKILL.md                          # 技能主文档
├── README.md                          # 本文件
├── references/
│   ├── hap-as-database-guide.md      # 完整的 HAP 前后端项目搭建指南
│   └── hap-api-usage-guide.md        # HAP API V3 使用规范
└── assets/
    ├── config.js.template             # 配置文件模板
    ├── api.js.template                # API 封装模板
    └── main.js.template               # 主应用逻辑模板
```

## 参考资源

### 核心文档

- **`references/hap-as-database-guide.md`** - 完整的搭建指南
  - 项目概述和架构说明
  - 详细步骤（HAP 配置、前端搭建、API 集成）
  - 核心概念和最佳实践
  - 常见问题和解决方案

- **`references/hap-api-usage-guide.md`** - API 使用规范
  - API 端点和鉴权配置
  - 筛选器（Filter）语法详解
  - 字段类型处理和数据格式转换
  - 完整的代码示例

### 代码模板

- **`assets/config.js.template`** - HAP API 配置文件模板
- **`assets/api.js.template`** - API 封装代码模板
- **`assets/main.js.template`** - 主应用逻辑模板

## 注意事项

1. **必须动态获取数据**: 业务数据必须从 HAP API 获取，不能写死在代码中
2. **用户确认机制**: 任何结构变更必须征得用户明确同意
3. **只增不删原则**: 绝不删除现有工作表、字段或数据
4. **附件字段填充**: 示例数据的附件字段必须填充图片 URL
5. **筛选使用 key**: SingleSelect/MultipleSelect 筛选必须使用选项的 key（UUID）
6. **自动启动服务器**: 完成项目搭建后必须自动启动本地开发服务器

## 版本信息

- **技能版本**: v1.0
- **最后更新**: 2026-01-11
- **适用场景**: HAP 前后端分离项目搭建
